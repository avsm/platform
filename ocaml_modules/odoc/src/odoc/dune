(library
 (name odoc__odoc)
 (public_name odoc.odoc)
 (libraries
  bos
  compiler-libs.common
  fpath
  odoc__alias
  odoc__compat
  odoc__html
  odoc__loader
  odoc__model
  odoc__xref
  tyxml
  unix)
 (flags (:standard -open Odoc__alias)))

(documentation)

(rule
 (targets css_file.ml)
 (deps (:css etc/odoc.css))
 (action
  (with-stdout-to %{targets}
   (progn
    (echo "let content = {css|")
    (cat %{css})
    (echo "|css}")))))

(rule
 (targets highlight_js.ml)
 (deps (:js ../vendor/highlight.pack.js))
 (action
  (with-stdout-to %{targets}
   (progn
    (echo "let content = {js|")
    (cat %{js})
    (echo "|js}")))))

; Install theme files for odig.
(install
 (section share)
 (files
  (etc/odoc.css as odoc-theme/default/odoc.css)
  (../vendor/highlight.pack.js as odoc-theme/default/highlight.pack.js)))
